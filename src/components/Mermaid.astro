---
export interface Props {
  id?: string;
  diagram: string;
  class?: string;
}

const { id = `mermaid-${Math.random().toString(36).substring(2, 15)}`, diagram, class: className = '' } = Astro.props;
---

<!-- Passive Mermaid component: emits a code block that the global renderer will process -->
<div id={id} class={`mermaid-container ${className}`}>
  <pre><code class="language-mermaid">{diagram}</code></pre>
</div>

<style>
  .mermaid-container {
    margin: 2rem 0;
    text-align: center;
  }

  pre, code {
    background: transparent;
    border: none;
  }

  .mermaid-container svg {
    max-width: 100%;
    height: auto;
    font-family: Inter, system-ui, sans-serif;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .mermaid-container {
      margin: 1rem 0;
    }
    
    .mermaid-container svg {
      font-size: 12px;
    }
  }
</style>